{"version":3,"file":"commonHelpers.js","sources":["../src/search.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst search = async (qvery, page) => {\n    try {\n        const request = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: '35439381-dc6c31f5e4218074de9a0ab23',\n                q: qvery,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 40,\n                page,\n            }\n        })\n        return request.data\n    } catch (error) {\n\t\treturn error.message\n\t}    \n}\n\nexport default search;","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport search from \"./search\";\n\n\nconst refs = {\n    form : document.querySelector('.form'),\n    gallery : document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMore: document.querySelector('.loadMore'),\n}\n    \n\nlet gallery = new SimpleLightbox('.gallery-item a',\n                    {   captionsData: 'alt',\n                        captionPosition: 'bottom',\n        captionDelay: 250\n    });\n                        \nlet page = 1;\nlet searchQuery = '';\nlet maxPage = 0;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n\n    refs.loadMore.classList.add('is-hidden');\n    refs.loader.classList.remove('is-hidden');\n    refs.gallery.innerHTML = '';\n    \n    searchQuery = refs.form.elements.search.value.trim();\n    page = 1;\n\n    try {\n        const data = await search(searchQuery, page);\n            if (data.hits.length === 0) {\n                return iziToast.error({\n                    position: 'topRight',\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                })\n            } else {\n                const mark = markup(data.hits);\n                refs.gallery.insertAdjacentHTML('beforeend', mark);\n                gallery.refresh();\n\n                maxPage = Math.ceil(data.totalHits / 40);\n                if (page < maxPage) {\n                    refs.loadMore.classList.remove('is-hidden');\n                }}\n    } catch(error) {\n            console.log(error)\n\t\t    iziToast.error({\n                    position: 'topRight',\n                    title: 'Error',\n                    message: error.message,\n                })\n    }\n    refs.loader.classList.add('is-hidden')\n    refs.form.reset();\n}\n\nasync function onLoadMoreClick() {\n    page += 1;\n    refs.loader.classList.remove('is-hidden');\n\n    try {\n        const data = await search(searchQuery, page);\n        const markupGallery = markup(data.hits)\n        refs.gallery.insertAdjacentHTML('beforeend', markupGallery);\n        gallery.refresh();\n        \n        if (page >= maxPage) {\n            refs.loadMore.classList.add('is-hidden')\n            iziToast.warning({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n    } catch(error)  {\n\t\t    iziToast.error({\n                    position: 'topRight',\n                    title: 'Error',\n                    message: error.message,\n                })\n    }\n    \n    refs.loader.classList.add('is-hidden');    \n}\n\nfunction markup(arr) {\n    return arr.map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n        return `<li class=\"gallery-item\"> \n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                <div class=\"wrap\">\n                    <p><b>Likes:</b> </br>${likes}</p>\n                    <p><b>Views:</b> </br>${views}</p>\n                    <p><b>Coments:</b> </br>${comments}</p>\n                    <p><b>Downloads:</b> </br>${downloads}</p>\n                </div>\n            </a>\n        </li>`\n    }).join('')\n\n   \n}\n\nfunction closeBtnLoadMore() {\n    \n}\n"],"names":["search","qvery","page","axios","error","refs","gallery","SimpleLightbox","searchQuery","maxPage","onFormSubmit","onLoadMoreClick","event","data","iziToast","mark","markup","markupGallery","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"owBAEA,MAAMA,EAAS,MAAOC,EAAOC,IAAS,CAClC,GAAI,CAYA,OAXgB,MAAMC,EAAM,IAAI,2BAA4B,CACxD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACH,CACb,CAAS,GACc,IAClB,OAAQE,EAAP,CACJ,OAAOA,EAAM,OACb,CACF,ECVMC,EAAO,CACT,KAAO,SAAS,cAAc,OAAO,EACrC,QAAU,SAAS,cAAc,UAAU,EAC3C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,WAAW,CAChD,EAGA,IAAIC,EAAU,IAAIC,EAAe,kBACb,CAAI,aAAc,MACd,gBAAiB,SACjC,aAAc,GACtB,CAAK,EAEDL,EAAO,EACPM,EAAc,GACdC,EAAU,EAEdJ,EAAK,KAAK,iBAAiB,SAAUK,CAAY,EACjDL,EAAK,SAAS,iBAAiB,QAASM,CAAe,EAEvD,eAAeD,EAAaE,EAAO,CAC/BA,EAAM,eAAc,EAEpBP,EAAK,SAAS,UAAU,IAAI,WAAW,EACvCA,EAAK,OAAO,UAAU,OAAO,WAAW,EACxCA,EAAK,QAAQ,UAAY,GAEzBG,EAAcH,EAAK,KAAK,SAAS,OAAO,MAAM,OAC9CH,EAAO,EAEP,GAAI,CACA,MAAMW,EAAO,MAAMb,EAAOQ,EAAaN,CAAI,EACvC,GAAIW,EAAK,KAAK,SAAW,EACrB,OAAOC,EAAS,MAAM,CAClB,SAAU,WACV,MAAO,QACP,QAAS,0EAC7B,CAAiB,EACE,CACH,MAAMC,EAAOC,EAAOH,EAAK,IAAI,EAC7BR,EAAK,QAAQ,mBAAmB,YAAaU,CAAI,EACjDT,EAAQ,QAAO,EAEfG,EAAU,KAAK,KAAKI,EAAK,UAAY,EAAE,EACnCX,EAAOO,GACPJ,EAAK,SAAS,UAAU,OAAO,WAAW,CAC7C,CACZ,OAAOD,EAAN,CACM,QAAQ,IAAIA,CAAK,EACvBU,EAAS,MAAM,CACD,SAAU,WACV,MAAO,QACP,QAASV,EAAM,OACnC,CAAiB,CACZ,CACDC,EAAK,OAAO,UAAU,IAAI,WAAW,EACrCA,EAAK,KAAK,OACd,CAEA,eAAeM,GAAkB,CAC7BT,GAAQ,EACRG,EAAK,OAAO,UAAU,OAAO,WAAW,EAExC,GAAI,CACA,MAAMQ,EAAO,MAAMb,EAAOQ,EAAaN,CAAI,EACrCe,EAAgBD,EAAOH,EAAK,IAAI,EACtCR,EAAK,QAAQ,mBAAmB,YAAaY,CAAa,EAC1DX,EAAQ,QAAO,EAEXJ,GAAQO,IACRJ,EAAK,SAAS,UAAU,IAAI,WAAW,EACvCS,EAAS,QAAQ,CACjB,QAAS,4DACrB,CAAa,EAER,OAAOV,EAAN,CACAU,EAAS,MAAM,CACD,SAAU,WACV,MAAO,QACP,QAASV,EAAM,OACnC,CAAiB,CACZ,CAEDC,EAAK,OAAO,UAAU,IAAI,WAAW,CACzC,CAEA,SAASW,EAAOE,EAAK,CACjB,OAAOA,EAAI,IAAI,CAAC,CAAC,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAC1E;AAAA,4CAC6BN;AAAA,kDACMC,WAAsBC;AAAA;AAAA,4CAE5BC;AAAA,4CACAC;AAAA,8CACEC;AAAA,gDACEC;AAAA;AAAA;AAAA,cAI3C,EAAE,KAAK,EAAE,CAGd"}